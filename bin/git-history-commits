#!/bin/bash -e

# -------------------------------------------------------------------------------------------------
# Functions
# -------------------------------------------------------------------------------------------------
BASEDIR=$(dirname $(readlink -f ${0}))
BASENAME=$(basename ${0})

source "${BASEDIR}/util.sh"

function usage {
  echo "List commit history of last 'n' commits. By default, n=25, branch=<current checkout branch>"
  echo ""
  echo "Usage: ${BASENAME} [branch] [<number of commits>]"
  exit 0
}

# -------------------------------------------------------------------------------------------------
# Parse Arg
# -------------------------------------------------------------------------------------------------
if [[ ${#} -eq 1 && ("${1}" == "-h" || "${1}" == "--help") ]]
then
  usage
fi

branch=""
count="25"
if [ ${#} -eq 1 ]
then
  if [[ "${1}" =~ ^[0-9]+$ ]]
  then
    count="${1}"
  else
    branch="${1}"
  fi  
elif [[ ${#} -eq 2 ]]
then
  branch="${1}"
  count="${2}"
fi

# -------------------------------------------------------------------------------------------------
# Main
# -------------------------------------------------------------------------------------------------
git log ${branch} --oneline -n ${count}
