#!/bin/bash -e

# -------------------------------------------------------------------------------------------------
# Functions
# -------------------------------------------------------------------------------------------------
BASEDIR=$(dirname $(readlink -f ${0}))
source "${BASEDIR}/util.sh"

function usage {
  echo "List tags along with the commit ids"
  echo "Usage: ${0}"
  exit 0
}

# -------------------------------------------------------------------------------------------------
# Parse Arg
# -------------------------------------------------------------------------------------------------
if [[ ${#} -eq 1 && ("${1}" == "-h" || "${1}" == "--help") ]]
then
  usage
fi

if [[ ${#} -ne 0 ]]
then
  dieUsage "Incorrect argument count"
fi  
# -------------------------------------------------------------------------------------------------
# Main
# -------------------------------------------------------------------------------------------------
for tag in $(git tag --list)    
do
  git show -s --format="%S %h '%s' %an %cI" ${tag} | tail -1
done
